<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: TOMWMS.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: TOMWMS.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
define(
  ['require', 'postal', 'jscookie', 'promise!config', 'tomMap', 'tomRightSidebar'],
  function(require, postal, Cookies, config, map) {

    // TODO Make Screenshot button
    // javascript:mapzen.whosonfirst.leaflet.tangram.screenshot_as_file('map');return false;

    class TOMWMS {
      constructor() {
          this.map = map;
          var me = this;
          var _channel = postal.channel();
          //        http://qgis.mountbatten.nl/wms/NgamboHistoric?SERVICE=WMS&amp;VERSION=1.3.0&amp;REQUEST=GetCapabilities
          var layers = [
            '1973 Post Revolution Developments',
            '1987 Zanzibar Plan',
            '1960 Land Surveys Zanzibar',
            '1927 Zanzibar City Survey',
            '1897 Baumann',
            '1892 Plan of Zanzibar',
            '1846 Guillain'
          ];

          this.wmslayers = [];
          var url = 'http://qgis.mountbatten.nl/wms/NgamboHistoric?';
          var defaultOpacity = .5;

          var i = 0;
          while (i &lt; layers.length) {
            this.wmslayers[layers[i]] = L.tileLayer.wms(url, {
              layers: layers[i],
              'style': 'Web',
              'format': 'image/png',
              'attribution': "Ngambo Team"
            });
            i++;
          };

          var control = new L.control.layers(null, this.wmslayers, {
            collapsed: false
          });
          control._map = map;

          $("#wms").append(control.onAdd(map));


          $("#wmsopacityslide").change(function() {
            console.log("setting opacity to " + this.value);
            me.updateOpacity(this.value);
          });
          me.updateOpacity(defaultOpacity);

          map.sidebarcontrols['rightsidebar'].enable('wmspane');


        }
        /** Sets the opacity of the currently selected layer
         **/
      updateOpacity(value) {
        var i = 0;
        while (i &lt; Object.keys(this.wmslayers).length) {
          var key = Object.keys(this.wmslayers)[i];
          var layer = this.wmslayers[key];
          console.log(layer);
          layer.setOpacity(value);
          i++;
        };
      }
    };

    return new TOMWMS();
  });
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="L.Control.SceneSwitcher.html">SceneSwitcher</a></li><li><a href="L.Control.Sidebar.html">Sidebar</a></li></ul><h3>Global</h3><ul><li><a href="global.html#loadFile">loadFile</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Fri Dec 23 2016 11:37:38 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
